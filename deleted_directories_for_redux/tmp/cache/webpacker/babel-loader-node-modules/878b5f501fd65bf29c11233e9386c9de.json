{"ast":null,"code":"// This file is automatically compiled by Webpack, along with any other files\n// present in this directory. You're encouraged to place your actual application logic in\n// a relevant structure within app/javascript and only use these pack files to reference\n// that code so it'll be compiled.\nRails = require(\"@rails/ujs\");\nRails.start();\n\nrequire(\"turbolinks\").start();\n\nrequire(\"@rails/activestorage\").start();\n\nrequire(\"channels\"); // require(\"chartkick\")\n// require(\"chart.js\")\n// require(\"chartkick\")\n\n\nrequire(\"chartkick\").use(require(\"highcharts\"));\n\ndocument.addEventListener(\"turbolinks:load\", function () {\n  $('[data-toggle=\"popover\"]').popover();\n  var entityValueMarking = document.getElementById('entity-value-marking');\n  document.querySelectorAll('form[action=\"/wit_ai_parse_model_examples\"]').forEach(function (form) {\n    form.addEventListener('ajax:before', function (e) {\n      if (form.dataset.isComplete !== 'true') {\n        e.preventDefault();\n        entityValueMarking.style.display = 'block';\n        alert('Pls select the text that should be the extracted value for this property.');\n\n        var onFinalSelectionChange = function onFinalSelectionChange() {\n          var selection = document.getSelection();\n          var isConfirmed = confirm('Confirm this property value? ' + selection);\n\n          if (!isConfirmed) {\n            return;\n          }\n\n          form.querySelector('input[name=\"wit_ai_parse_model_example[entity_value]\"]').value = selection;\n          form.querySelector('input[name=\"wit_ai_parse_model_example[parsable_resource_entity_value_start_index]\"]').value = selection.baseNode.parentElement.dataset.index;\n          form.querySelector('input[name=\"wit_ai_parse_model_example[parsable_resource_entity_value_end_index]\"]').value = selection.extentNode.parentElement.dataset.index;\n          form.dataset.isComplete = 'true';\n          Rails.fire(form, 'submit');\n        };\n\n        var lastTimeStamp = 0;\n        document.addEventListener('selectionchange', function (e) {\n          setTimeout(function () {\n            if (e.timeStamp === lastTimeStamp) {\n              onFinalSelectionChange();\n            }\n          }, 1000);\n          lastTimeStamp = e.timeStamp;\n        });\n      }\n    });\n  });\n}); // Uncomment to copy all static images under ../images to the output folder and reference\n// them with the image_pack_tag helper in views (e.g <%= image_pack_tag 'rails.png' %>)\n// or the `imagePath` JavaScript helper below.\n//\n// const images = require.context('../images', true)\n// const imagePath = (name) => images(name, true\n// // import and load opal ruby files\n// import init_app from 'opal_loader.rb';\n// init_app();\n// Opal.load('opal_loader');","map":{"version":3,"sources":["/Users/lemonandroid/Banal Dropbox/random/ezii-os/app/javascript/packs/application.js"],"names":["Rails","require","start","use","document","addEventListener","$","popover","entityValueMarking","getElementById","querySelectorAll","forEach","form","e","dataset","isComplete","preventDefault","style","display","alert","onFinalSelectionChange","selection","getSelection","isConfirmed","confirm","querySelector","value","baseNode","parentElement","index","extentNode","fire","lastTimeStamp","setTimeout","timeStamp"],"mappings":"AAAA;AACA;AACA;AACA;AAGAA,KAAK,GAAGC,OAAO,CAAC,YAAD,CAAf;AACAD,KAAK,CAACE,KAAN;;AACAD,OAAO,CAAC,YAAD,CAAP,CAAsBC,KAAtB;;AACAD,OAAO,CAAC,sBAAD,CAAP,CAAgCC,KAAhC;;AACAD,OAAO,CAAC,UAAD,CAAP,C,CAEA;AACA;AACA;;;AACAA,OAAO,CAAC,WAAD,CAAP,CAAqBE,GAArB,CAAyBF,OAAO,CAAC,YAAD,CAAhC;;AAIAG,QAAQ,CAACC,gBAAT,CAA0B,iBAA1B,EAA6C,YAAU;AACnDC,EAAAA,CAAC,CAAC,yBAAD,CAAD,CAA6BC,OAA7B;AAEA,MAAIC,kBAAkB,GAAGJ,QAAQ,CAACK,cAAT,CAAwB,sBAAxB,CAAzB;AAEAL,EAAAA,QAAQ,CAACM,gBAAT,CAA0B,6CAA1B,EAAyEC,OAAzE,CAAiF,UAASC,IAAT,EAAe;AAC5FA,IAAAA,IAAI,CAACP,gBAAL,CAAsB,aAAtB,EAAqC,UAASQ,CAAT,EAAY;AAC7C,UAAGD,IAAI,CAACE,OAAL,CAAaC,UAAb,KAA4B,MAA/B,EAAuC;AACnCF,QAAAA,CAAC,CAACG,cAAF;AACAR,QAAAA,kBAAkB,CAACS,KAAnB,CAAyBC,OAAzB,GAAmC,OAAnC;AAEAC,QAAAA,KAAK,CAAC,2EAAD,CAAL;;AAEA,YAAIC,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAW;AACpC,cAAIC,SAAS,GAAGjB,QAAQ,CAACkB,YAAT,EAAhB;AACA,cAAIC,WAAW,GAAGC,OAAO,CAAC,kCAAkCH,SAAnC,CAAzB;;AACA,cAAG,CAACE,WAAJ,EAAiB;AAAE;AAAS;;AAC5BX,UAAAA,IAAI,CAACa,aAAL,CAAmB,wDAAnB,EAA6EC,KAA7E,GAAqFL,SAArF;AACAT,UAAAA,IAAI,CAACa,aAAL,CAAmB,sFAAnB,EAA2GC,KAA3G,GAAmHL,SAAS,CAACM,QAAV,CAAmBC,aAAnB,CAAiCd,OAAjC,CAAyCe,KAA5J;AACAjB,UAAAA,IAAI,CAACa,aAAL,CAAmB,oFAAnB,EAAyGC,KAAzG,GAAiHL,SAAS,CAACS,UAAV,CAAqBF,aAArB,CAAmCd,OAAnC,CAA2Ce,KAA5J;AAEAjB,UAAAA,IAAI,CAACE,OAAL,CAAaC,UAAb,GAA0B,MAA1B;AAEAf,UAAAA,KAAK,CAAC+B,IAAN,CAAWnB,IAAX,EAAiB,QAAjB;AACH,SAXD;;AAaA,YAAIoB,aAAa,GAAG,CAApB;AACA5B,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,iBAA1B,EAA6C,UAACQ,CAAD,EAAO;AAEhDoB,UAAAA,UAAU,CAAC,YAAW;AAClB,gBAAGpB,CAAC,CAACqB,SAAF,KAAgBF,aAAnB,EAAkC;AAC9BZ,cAAAA,sBAAsB;AACzB;AACJ,WAJS,EAIP,IAJO,CAAV;AAOAY,UAAAA,aAAa,GAAGnB,CAAC,CAACqB,SAAlB;AACH,SAVD;AAWH;AACJ,KAjCD;AAkCH,GAnCD;AAoCH,CAzCD,E,CA6CA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA","sourcesContent":["// This file is automatically compiled by Webpack, along with any other files\n// present in this directory. You're encouraged to place your actual application logic in\n// a relevant structure within app/javascript and only use these pack files to reference\n// that code so it'll be compiled.\n\n\nRails = require(\"@rails/ujs\")\nRails.start()\nrequire(\"turbolinks\").start()\nrequire(\"@rails/activestorage\").start()\nrequire(\"channels\")\n\n// require(\"chartkick\")\n// require(\"chart.js\")\n// require(\"chartkick\")\nrequire(\"chartkick\").use(require(\"highcharts\"))\n\n\n\ndocument.addEventListener(\"turbolinks:load\", function(){\n    $('[data-toggle=\"popover\"]').popover();\n\n    var entityValueMarking = document.getElementById('entity-value-marking');\n\n    document.querySelectorAll('form[action=\"/wit_ai_parse_model_examples\"]').forEach(function(form) {\n        form.addEventListener('ajax:before', function(e) {\n            if(form.dataset.isComplete !== 'true') {\n                e.preventDefault();\n                entityValueMarking.style.display = 'block';\n\n                alert('Pls select the text that should be the extracted value for this property.');\n\n                let onFinalSelectionChange = function() {\n                    let selection = document.getSelection();\n                    let isConfirmed = confirm('Confirm this property value? ' + selection);\n                    if(!isConfirmed) { return; }\n                    form.querySelector('input[name=\"wit_ai_parse_model_example[entity_value]\"]').value = selection;\n                    form.querySelector('input[name=\"wit_ai_parse_model_example[parsable_resource_entity_value_start_index]\"]').value = selection.baseNode.parentElement.dataset.index;\n                    form.querySelector('input[name=\"wit_ai_parse_model_example[parsable_resource_entity_value_end_index]\"]').value = selection.extentNode.parentElement.dataset.index;\n\n                    form.dataset.isComplete = 'true';\n\n                    Rails.fire(form, 'submit');\n                }\n                \n                let lastTimeStamp = 0;\n                document.addEventListener('selectionchange', (e) => {\n\n                    setTimeout(function() {\n                        if(e.timeStamp === lastTimeStamp) {\n                            onFinalSelectionChange()\n                        } \n                    }, 1000)\n        \n                    \n                    lastTimeStamp = e.timeStamp;\n                });\n            }\n        })\n    });\n});\n\n\n\n// Uncomment to copy all static images under ../images to the output folder and reference\n// them with the image_pack_tag helper in views (e.g <%= image_pack_tag 'rails.png' %>)\n// or the `imagePath` JavaScript helper below.\n//\n// const images = require.context('../images', true)\n// const imagePath = (name) => images(name, true\n\n// // import and load opal ruby files\n// import init_app from 'opal_loader.rb';\n// init_app();\n// Opal.load('opal_loader');\n\n"]},"metadata":{},"sourceType":"module"}