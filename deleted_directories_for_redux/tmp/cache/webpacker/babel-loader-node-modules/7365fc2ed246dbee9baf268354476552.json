{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport * as THREE from 'three';\nimport { OrbitControls } from '../kmz/jsm/controls/OrbitControls.js';\nimport GltfLoadAnimatedObject from '../eZii-bricklayer-game/gltf-load-animated-object.js';\n\nvar EZIIBrickLayerGameMain =\n/*#__PURE__*/\nfunction () {\n  function EZIIBrickLayerGameMain() {\n    _classCallCheck(this, EZIIBrickLayerGameMain);\n\n    this.mixers = {};\n    this.scene = undefined;\n    this.cubes = [];\n    this.docking = undefined;\n    this.camera = undefined;\n    this.renderer = undefined;\n    this.controls = undefined;\n    this.clock = new THREE.Clock();\n    this.rayCaster = new THREE.Raycaster();\n    this.mousePosition = new THREE.Vector2();\n  }\n\n  _createClass(EZIIBrickLayerGameMain, [{\n    key: \"findDomDockingPoint\",\n    value: function findDomDockingPoint() {\n      var _this = this;\n\n      var promise = new Promise(function (resolve, reject) {\n        var notFound = true;\n        var i = 0;\n\n        while (notFound) {\n          _this.docking = document.body.querySelector('#docking-point-for-threejs');\n\n          if (!_this.docking) {\n            i++;\n\n            if (i < 40) {\n              continue;\n            } else {\n              reject(\"couldn't find element with id docking-point-for-threejs\");\n            }\n\n            ;\n          } else {\n            resolve();\n            notFound = false;\n          }\n        }\n      });\n      return promise;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.scene = new THREE.Scene();\n      var geometry = new THREE.BoxGeometry(100, 100, 10);\n      var material = new THREE.MeshBasicMaterial({\n        color: 0x00ff00\n      }); // ยง\n\n      this.cubes.push(new THREE.Mesh(geometry, material));\n      this.scene.add(this.cubes[0]);\n      var geometry2 = new THREE.BoxGeometry(100, 100, 10);\n      var material2 = new THREE.MeshBasicMaterial({\n        color: 0x0000ff\n      }); // ยง\n\n      this.cubes.push(new THREE.Mesh(geometry2, material2));\n      this.scene.add(this.cubes[1]);\n      this.scene.background = new THREE.Color(0x999999);\n      var light = new THREE.DirectionalLight(0xffffff);\n      light.position.set(0.5, 1.0, 0.5).normalize();\n      this.scene.add(light);\n      this.camera = new THREE.PerspectiveCamera(35, this.docking.clientWidth / this.docking.clientHeight, 1, 500);\n      this.camera.position.y = 5;\n      this.camera.position.z = 10;\n      this.scene.add(this.camera);\n      var grid = new THREE.GridHelper(50, 50, 0xffffff, 0x555555);\n      this.scene.add(grid);\n      this.renderer = new THREE.WebGLRenderer({\n        antialias: true\n      });\n      this.renderer.setPixelRatio(window.devicePixelRatio);\n      this.renderer.setSize(this.docking.clientWidth, this.docking.clientHeight);\n      this.canvas = this.renderer.domElement;\n      this.docking.appendChild(this.canvas);\n      this.canvasPosition = $(this.canvas).position();\n      this.controls = new OrbitControls(this.camera, this.renderer.domElement); // controls.addEventListener( 'change', render );\n\n      this.controls.update();\n      window.addEventListener('resize', this.onWindowResize, false);\n    }\n  }, {\n    key: \"onWindowResize\",\n    value: function onWindowResize() {\n      this.camera.aspect = this.docking.clientWidth / this.docking.clientHeight;\n      this.camera.updateProjectionMatrix();\n      this.renderer.setSize(this.docking.clientWidth, this.docking.clientHeight);\n      this.render();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.renderer.render(this.scene, this.camera);\n    }\n  }, {\n    key: \"moveObjectZAxis\",\n    value: function moveObjectZAxis(object) {\n      object.position.z += 10;\n    }\n  }, {\n    key: \"addObject\",\n    value: function () {\n      var _addObject = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(id) {\n        var loadObject, promise;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                loadObject = new GltfLoadAnimatedObject(this.scene);\n                promise = new Promise(\n                /*#__PURE__*/\n                function () {\n                  var _ref = _asyncToGenerator(\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee(resolve, reject) {\n                    var _ref2, _ref3, object, mixer;\n\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return loadObject.addObject(id);\n\n                          case 2:\n                            _ref2 = _context.sent;\n                            _ref3 = _slicedToArray(_ref2, 2);\n                            object = _ref3[0];\n                            mixer = _ref3[1];\n                            resolve([object, mixer, id]);\n\n                          case 7:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x2, _x3) {\n                    return _ref.apply(this, arguments);\n                  };\n                }());\n                return _context2.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function addObject(_x) {\n        return _addObject.apply(this, arguments);\n      }\n\n      return addObject;\n    }()\n  }, {\n    key: \"animate\",\n    value: function animate(id) {\n      var _this2 = this;\n\n      // debugger;\n      requestAnimationFrame(function () {\n        _this2.animate.bind(_this2)(id);\n      });\n      if (this.mixers[id]) this.mixers[id].update(this.clock.getDelta());\n      this.controls.update();\n      this.render();\n    }\n  }, {\n    key: \"getClicked3DPoint\",\n    value: function getClicked3DPoint(evt) {\n      evt.preventDefault();\n      mousePosition.x = (evt.clientX - this.canvasPosition.left) / this.docking.width * 2 - 1;\n      mousePosition.y = -((evt.clientY - this.canvasPosition.top) / this.docking.height) * 2 + 1;\n      rayCaster.setFromCamera(mousePosition, camera);\n      var intersects = rayCaster.intersectObjects(scene.getObjectByName('MyObj_s').children, true);\n      if (intersects.length > 0) return intersects[0].point;\n    }\n  }]);\n\n  return EZIIBrickLayerGameMain;\n}();\n\nexport { EZIIBrickLayerGameMain as default };","map":{"version":3,"sources":["/Users/lemonandroid/Banal Dropbox/random/mega-os/ezii-os/app/javascript/packs/eZii-bricklayer-game/main.js"],"names":["THREE","OrbitControls","GltfLoadAnimatedObject","EZIIBrickLayerGameMain","mixers","scene","undefined","cubes","docking","camera","renderer","controls","clock","Clock","rayCaster","Raycaster","mousePosition","Vector2","promise","Promise","resolve","reject","notFound","i","document","body","querySelector","Scene","geometry","BoxGeometry","material","MeshBasicMaterial","color","push","Mesh","add","geometry2","material2","background","Color","light","DirectionalLight","position","set","normalize","PerspectiveCamera","clientWidth","clientHeight","y","z","grid","GridHelper","WebGLRenderer","antialias","setPixelRatio","window","devicePixelRatio","setSize","canvas","domElement","appendChild","canvasPosition","$","update","addEventListener","onWindowResize","aspect","updateProjectionMatrix","render","object","id","loadObject","addObject","mixer","requestAnimationFrame","animate","bind","getDelta","evt","preventDefault","x","clientX","left","width","clientY","top","height","setFromCamera","intersects","intersectObjects","getObjectByName","children","length","point"],"mappings":"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","sourcesContent":["import * as THREE from 'three';\nimport { OrbitControls } from '../kmz/jsm/controls/OrbitControls.js';\nimport GltfLoadAnimatedObject from '../eZii-bricklayer-game/gltf-load-animated-object.js';\n\nexport default class EZIIBrickLayerGameMain {\n\tconstructor() {\n\t\tthis.mixers = {};\n\t\tthis.scene = undefined;\n\t\tthis.cubes = [];\n\t\tthis.docking = undefined;\n\t\tthis.camera = undefined;\n\t\tthis.renderer = undefined;\n\t\tthis.controls = undefined;\n\t\tthis.clock = new THREE.Clock();\n\t\t\n\t    this.rayCaster = new THREE.Raycaster();\n\t    this.mousePosition = new THREE.Vector2();\n\t\t\n\t}\n\t\n\t\n\tfindDomDockingPoint() {\n\t\tvar promise = new Promise((resolve, reject) => {\n\t\t\tvar notFound = true;\n\t\t\tvar i = 0;\n\t\t\twhile(notFound) {\n\t\t\t\tthis.docking = document.body.querySelector('#docking-point-for-threejs');\n\t\t\t\tif(!this.docking) {\n\t\t\t\t\ti++;\n\t\t\t\t\tif (i < 40) { continue } else { reject(\"couldn't find element with id docking-point-for-threejs\") };\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tresolve();\n\t\t\t\t\tnotFound = false;\n\t\t\t\t}\n\t\t\t}\t\t\n\t\t});\n\t\t\n\t\treturn promise;\n\t}\n\t\n\t\n\tinit() {\n\n\t\tthis.scene = new THREE.Scene();\n\t\n\t\tvar geometry = new THREE.BoxGeometry( 100, 100, 10 );\n\t\tvar material = new THREE.MeshBasicMaterial( {color: 0x00ff00} );\n\t\n\t\t// ยง\n\t\tthis.cubes.push(new THREE.Mesh( geometry, material ));\n\t\tthis.scene.add( this.cubes[0] );\n\t\n\t\tvar geometry2 = new THREE.BoxGeometry( 100, 100, 10 );\n\t\tvar material2 = new THREE.MeshBasicMaterial( {color: 0x0000ff} );\n\t\n\t\t// ยง\n\t\tthis.cubes.push(new THREE.Mesh( geometry2, material2 ));\n\t\tthis.scene.add( this.cubes[1] );\n\t\n\t\tthis.scene.background = new THREE.Color( 0x999999 );\n\t\tvar light = new THREE.DirectionalLight( 0xffffff );\n\t\tlight.position.set( 0.5, 1.0, 0.5 ).normalize();\n\t\tthis.scene.add( light );\n\t\tthis.camera = new THREE.PerspectiveCamera( 35, this.docking.clientWidth / this.docking.clientHeight, 1, 500 );\n\t\tthis.camera.position.y = 5;\n\t\tthis.camera.position.z = 10;\n\t\tthis.scene.add( this.camera );\n\t\tvar grid = new THREE.GridHelper( 50, 50, 0xffffff, 0x555555 );\n\t\tthis.scene.add( grid );\n\t\tthis.renderer = new THREE.WebGLRenderer( { antialias: true } );\n\t\tthis.renderer.setPixelRatio( window.devicePixelRatio );\n\t\tthis.renderer.setSize( this.docking.clientWidth, this.docking.clientHeight );\n\t\tthis.canvas = this.renderer.domElement;\n\t\t\n\t\tthis.docking.appendChild( this.canvas );\n\t\t\n\t\tthis.canvasPosition = $(this.canvas).position(); \n\t\n\t    this.controls = new OrbitControls( this.camera, this.renderer.domElement );\n\t\t// controls.addEventListener( 'change', render );\n\t\tthis.controls.update();\n\t\twindow.addEventListener( 'resize', this.onWindowResize, false );\n\t}\n\t\n\n\n\n\n\tonWindowResize() {\n\t\tthis.camera.aspect = this.docking.clientWidth / this.docking.clientHeight;\n\t\tthis.camera.updateProjectionMatrix();\n\t\tthis.renderer.setSize( this.docking.clientWidth, this.docking.clientHeight );\n\t\tthis.render();\n\t}\n\t\n\t\n\t\n\trender() {\n\t\tthis.renderer.render( this.scene, this.camera );\n\t}\n\t\n\t\n\n\n\tmoveObjectZAxis(object) {\n\t\tobject.position.z += 10;\n\t}\n\t\n\t\n\n\n\tasync addObject(id) {\t\n\t\tvar loadObject = new GltfLoadAnimatedObject(this.scene)\n\t\t\n\t\tlet promise = new Promise(async function(resolve, reject) {\n\t\t\tlet [object, mixer] = await loadObject.addObject(id);\n\t\t\tresolve([object, mixer, id])\n\n\t\t});\n\t\t\n\t\treturn promise;\n\t}\n\t\n\t\n\t\n\tanimate(id) {\n\t\t// debugger;\n\t\t\t\trequestAnimationFrame( () => { this.animate.bind(this)(id) } );\n\t\t\t\tif ( this.mixers[id] ) this.mixers[id].update( this.clock.getDelta() );\n\t\t\t\tthis.controls.update();\n\t\t\t\tthis.render();\n\t}\n\t\n\t\n\tgetClicked3DPoint(evt) {\n\t    evt.preventDefault();\n\n\t    mousePosition.x = ((evt.clientX - this.canvasPosition.left) / this.docking.width) * 2 - 1;\n\t    mousePosition.y = -((evt.clientY - this.canvasPosition.top) / this.docking.height) * 2 + 1;\n\n\t    rayCaster.setFromCamera(mousePosition, camera);\n\t    var intersects = rayCaster.intersectObjects(scene.getObjectByName('MyObj_s').children, true);\n\n\t    if (intersects.length > 0)\n\t        return intersects[0].point;\n\t};\n\t\n}"]},"metadata":{},"sourceType":"module"}