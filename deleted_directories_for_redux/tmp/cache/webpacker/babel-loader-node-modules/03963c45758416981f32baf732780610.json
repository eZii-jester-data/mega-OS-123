{"ast":null,"code":"// import * as THREE from '../build/three.module.js';\nimport * as THREE from 'three';\nimport { GLTFLoader } from './gltf/jsm/loaders/GLTFLoader.js';\nimport { OrbitControls } from './kmz/jsm/controls/OrbitControls.js';\n$(function () {\n  var notFound = true;\n  var i = 0;\n\n  var _loop2 = function _loop2() {\n    docking = document.body.querySelector('#docking-point-for-threejs');\n    console.log(docking);\n\n    if (!docking) {\n      i++;\n\n      if (i < 40) {\n        return \"continue\";\n      } else {\n        return \"break\";\n      }\n\n      ;\n    } else {\n      notFound = false;\n    }\n\n    clock = new THREE.Clock();\n\n    function init() {\n      scene = new THREE.Scene();\n      var geometry = new THREE.BoxGeometry(100, 100, 10);\n      var material = new THREE.MeshBasicMaterial({\n        color: 0x00ff00\n      }); // ยง\n\n      cube = new THREE.Mesh(geometry, material);\n      scene.add(cube);\n      var geometry2 = new THREE.BoxGeometry(100, 100, 10);\n      var material2 = new THREE.MeshBasicMaterial({\n        color: 0x0000ff\n      }); // ยง\n\n      cube2 = new THREE.Mesh(geometry2, material2);\n      scene.add(cube2);\n      scene.background = new THREE.Color(0x999999);\n      var light = new THREE.DirectionalLight(0xffffff);\n      light.position.set(0.5, 1.0, 0.5).normalize();\n      scene.add(light);\n      camera = new THREE.PerspectiveCamera(35, docking.clientWidth / docking.clientHeight, 1, 500);\n      camera.position.y = 5;\n      camera.position.z = 10;\n      scene.add(camera);\n      var grid = new THREE.GridHelper(50, 50, 0xffffff, 0x555555);\n      scene.add(grid);\n      renderer = new THREE.WebGLRenderer({\n        antialias: true\n      });\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.setSize(docking.clientWidth, docking.clientHeight);\n      docking.appendChild(renderer.domElement);\n      controls = new OrbitControls(camera, renderer.domElement); // controls.addEventListener( 'change', render );\n\n      controls.update();\n      window.addEventListener('resize', onWindowResize, false);\n    }\n\n    function onWindowResize() {\n      camera.aspect = docking.clientWidth / docking.clientHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(docking.clientWidth, docking.clientHeight);\n      render();\n    }\n\n    function render() {\n      renderer.render(scene, camera);\n    }\n\n    function moveObjectZAxis(object) {\n      object.position.z += 10;\n    }\n\n    function addObject() {\n      var loadingManager = new THREE.LoadingManager();\n\n      loadingManager.getHandler = function (arg) {\n        console.log(arg);\n      };\n\n      loadingManager.setURLModifier(function (url) {\n        console.log(url);\n        var regex = /\\/gltf_models\\/4/g;\n\n        if (!url.match(regex)) {\n          url = url.replace('/gltf_models/', '/gltf_models/4/');\n        }\n\n        console.log(url);\n        return url;\n      });\n      var loader = new GLTFLoader(loadingManager); // manager.addHandler( /\\.tga$/i, new TGALoader() );\n\n      loader.load('/gltf_models/4.gltf', function (gltf) {\n        // gltf.scene.position.y = 0.5;\n        var object = gltf.scene;\n        mainObject = object;\n        var animations = gltf.animations;\n        console.log(animations.length);\n\n        if (animations && animations.length) {\n          mixer = new THREE.AnimationMixer(object);\n\n          for (var i = 0; i < animations.length; i++) {\n            var animation = animations[i];\n            var action = mixer.clipAction(animation);\n            action.play();\n          }\n        }\n\n        scene.add(object);\n        console.log(object);\n      }, // called while loading is progressing\n      function (xhr) {\n        console.log(xhr.loaded / xhr.total * 100 + '% loaded');\n      }, // called when loading has errors\n      function (error) {\n        console.log('An error happened');\n        console.log(error);\n      });\n    }\n\n    function animate() {\n      requestAnimationFrame(animate);\n      if (mixer) mixer.update(clock.getDelta());\n      controls.update();\n      render();\n    }\n\n    init();\n    moveObjectZAxis(cube2);\n    addObject();\n    animate();\n  };\n\n  _loop: while (notFound) {\n    var docking;\n    var camera, scene, renderer;\n    var cube, cube2, cube3;\n    var gltf, background, envMap, mixer, gui, extensionControls, controls;\n    var clock;\n\n    var _ret = _loop2();\n\n    switch (_ret) {\n      case \"continue\":\n        continue;\n\n      case \"break\":\n        break _loop;\n    }\n  }\n});","map":{"version":3,"sources":["/Users/lemonandroid/Banal Dropbox/random/mega-os/ezii-os/app/javascript/packs/eZii-bricklayer-game-3.js"],"names":["THREE","GLTFLoader","OrbitControls","$","notFound","i","docking","document","body","querySelector","console","log","clock","Clock","init","scene","Scene","geometry","BoxGeometry","material","MeshBasicMaterial","color","cube","Mesh","add","geometry2","material2","cube2","background","Color","light","DirectionalLight","position","set","normalize","camera","PerspectiveCamera","clientWidth","clientHeight","y","z","grid","GridHelper","renderer","WebGLRenderer","antialias","setPixelRatio","window","devicePixelRatio","setSize","appendChild","domElement","controls","update","addEventListener","onWindowResize","aspect","updateProjectionMatrix","render","moveObjectZAxis","object","addObject","loadingManager","LoadingManager","getHandler","arg","setURLModifier","url","regex","match","replace","loader","load","gltf","mainObject","animations","length","mixer","AnimationMixer","animation","action","clipAction","play","xhr","loaded","total","error","animate","requestAnimationFrame","getDelta","cube3","envMap","gui","extensionControls"],"mappings":"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","sourcesContent":["\n// import * as THREE from '../build/three.module.js';\n\n\nimport * as THREE from 'three';\nimport { GLTFLoader } from './gltf/jsm/loaders/GLTFLoader.js';\n\nimport { OrbitControls } from './kmz/jsm/controls/OrbitControls.js';\n\n$(function() {\n\t\n\t\n\t\n\tvar notFound = true;\n\tvar i = 0;\n\twhile(notFound) {\n\t\tvar docking = document.body.querySelector('#docking-point-for-threejs');\n\t\tconsole.log(docking);\n\t\tif(!docking) {\n\t\t\ti++;\n\t\t\tif (i < 40) { continue } else { break };\n\t\t} else {\n\t\t\tnotFound = false;\n\t\t}\n\t\n\t\tvar camera, scene, renderer;\n\t\tvar cube, cube2, cube3;\n\t\tvar gltf, background, envMap, mixer, gui, extensionControls, controls;\n\t\tvar clock = new THREE.Clock();\n\n\t\tfunction init() {\n\n\t\t\tscene = new THREE.Scene();\n\t\t\n\t\t\tvar geometry = new THREE.BoxGeometry( 100, 100, 10 );\n\t\t\tvar material = new THREE.MeshBasicMaterial( {color: 0x00ff00} );\n\t\t\n\t\t\t// ยง\n\t\t\tcube = new THREE.Mesh( geometry, material );\n\t\t\tscene.add( cube );\n\t\t\n\t\t\tvar geometry2 = new THREE.BoxGeometry( 100, 100, 10 );\n\t\t\tvar material2 = new THREE.MeshBasicMaterial( {color: 0x0000ff} );\n\t\t\n\t\t\t// ยง\n\t\t\tcube2 = new THREE.Mesh( geometry2, material2 );\n\t\t\tscene.add( cube2 );\n\t\t\n\t\t\tscene.background = new THREE.Color( 0x999999 );\n\t\t\tvar light = new THREE.DirectionalLight( 0xffffff );\n\t\t\tlight.position.set( 0.5, 1.0, 0.5 ).normalize();\n\t\t\tscene.add( light );\n\t\t\tcamera = new THREE.PerspectiveCamera( 35, docking.clientWidth / docking.clientHeight, 1, 500 );\n\t\t\tcamera.position.y = 5;\n\t\t\tcamera.position.z = 10;\n\t\t\tscene.add( camera );\n\t\t\tvar grid = new THREE.GridHelper( 50, 50, 0xffffff, 0x555555 );\n\t\t\tscene.add( grid );\n\t\t\trenderer = new THREE.WebGLRenderer( { antialias: true } );\n\t\t\trenderer.setPixelRatio( window.devicePixelRatio );\n\t\t\trenderer.setSize( docking.clientWidth, docking.clientHeight );\n\t\t\tdocking.appendChild( renderer.domElement );\n\t\t\n\n\t\t    controls = new OrbitControls( camera, renderer.domElement );\n\t\t\t// controls.addEventListener( 'change', render );\n\t\t\tcontrols.update();\n\t\t\twindow.addEventListener( 'resize', onWindowResize, false );\n\t\t}\n\t\tfunction onWindowResize() {\n\t\t\tcamera.aspect = docking.clientWidth / docking.clientHeight;\n\t\t\tcamera.updateProjectionMatrix();\n\t\t\trenderer.setSize( docking.clientWidth, docking.clientHeight );\n\t\t\trender();\n\t\t}\n\t\t\n\t\tfunction render() {\n\t\t\trenderer.render( scene, camera );\n\t\t}\n\n\n\t\tfunction moveObjectZAxis(object) {\n\t\t\tobject.position.z += 10;\n\t\t}\n\t\t\n\t\tfunction addObject() {\t\t\t\n\t\t\tlet loadingManager = new THREE.LoadingManager();\n\t\t\t\n\t\t\tloadingManager.getHandler = function(arg) { console.log(arg) }\n\t\t\t\n\t\t\tloadingManager.setURLModifier( ( url ) => {\n\t\t\t\tconsole.log(url);\n\t\t\t\tlet regex =  /\\/gltf_models\\/4/g\n\t\t\t\t\n\t\t\t\tif(!(url.match(regex))) {\n\t\t\t\t\turl = url.replace('/gltf_models/', '/gltf_models/4/');\n\t\t\t\t}\n\t\t\t\tconsole.log(url);\n\t\t\t\t\n\t\t\t\treturn url;\n\n\t\t\t});\n\t\t\t\n\t\t\tvar loader = new GLTFLoader(loadingManager);\n\t\t\t\n\t\t\t// manager.addHandler( /\\.tga$/i, new TGALoader() );\n\t\t\n\t\t\tloader.load( '/gltf_models/4.gltf', function ( gltf ) {\n\t\t\t\t// gltf.scene.position.y = 0.5;\n\t\t\t\t\n\t\t\t\tvar object = gltf.scene;\n\t\t\t\tmainObject = object;\n\t\t\t\tvar animations = gltf.animations;\t\t\t\t\n\t\t\t\t\n\t\t\t\tconsole.log(animations.length);\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif ( animations && animations.length ) {\n\t\t\t\t\t\t\t\t\tmixer = new THREE.AnimationMixer( object );\n\t\t\t\t\t\t\t\t\tfor ( var i = 0; i < animations.length; i ++ ) {\n\t\t\t\t\t\t\t\t\t\tvar animation = animations[ i ]\n\t\t\t\t\t\t\t\t\t\tvar action = mixer.clipAction( animation );\n\t\t\t\t\t\t\t\t\t\taction.play();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\tscene.add( object );\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tconsole.log(object);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t},\n\t\t\n\t\t\t// called while loading is progressing\n\t\t\tfunction ( xhr ) {\n\n\t\t\t\tconsole.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );\n\n\t\t\t},\n\t\t\t// called when loading has errors\n\t\t\tfunction ( error ) {\n\n\t\t\t\tconsole.log( 'An error happened' );\n\t\t\t\tconsole.log( error );\n\t\t\t\t\n\n\t\t\t}\n\t\t\n\t\t );\n\t\t}\n\t\t\n\t\tfunction animate() {\n\t\t\t\t\trequestAnimationFrame( animate );\n\t\t\t\t\tif ( mixer ) mixer.update( clock.getDelta() );\n\t\t\t\t\tcontrols.update();\n\t\t\t\t\trender();\n\t\t}\n\n\t\tinit();\n\t\tmoveObjectZAxis(cube2);\n\t\taddObject();\n\t\tanimate();\n\t\t\n\t}\n});\n"]},"metadata":{},"sourceType":"module"}