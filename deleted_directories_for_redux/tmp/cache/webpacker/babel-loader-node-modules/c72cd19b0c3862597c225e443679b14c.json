{"ast":null,"code":"function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport EZIIBrickLayerGameMain from './eZii-bricklayer-game/main.js';\nimport * as THREE from 'three';\n$(function () {\n  var main = new EZIIBrickLayerGameMain();\n  var playerWalkingDirection = [0, 0, 0];\n  main.findDomDockingPoint().then(function () {\n    main.init();\n    main.moveObjectZAxis(main.cubes[1]);\n    main.addObject(4).then(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 3),\n          object = _ref2[0],\n          mixer = _ref2[1],\n          id = _ref2[2];\n\n      window.mainObject = object;\n      main.mixers[id] = mixer;\n      main.animate(id);\n      window.mainObject.position.z = 20;\n      main.every10MilliSeconds(function () {\n        window.mainObject.position.z += playerWalkingDirection[2] / 5;\n        window.mainObject.position.y += playerWalkingDirection[1] / 5;\n        window.mainObject.position.x += playerWalkingDirection[0] / 5;\n      });\n      main.every10MilliSeconds(function () {\n        if (window.positionWanted === undefined) return;\n\n        if (window.mainObject.position.z < window.positionWanted.z + 0.010 && window.mainObject.position.z > window.positionWanted.z - 0.010 && window.mainObject.position.x < window.positionWanted.x + 0.010 && window.mainObject.position.x > window.positionWanted.x - 0.010) {\n          window.positionWanted = undefined;\n          playerWalkingDirection = [0, 0, 0];\n          main.stopAnimation(4);\n          console.log(main.stoppedMixers[4].time);\n\n          while (main.stoppedMixers[4].time > 0.2) {\n            main.stoppedMixers[4].update(-0.01);\n          }\n        }\n      });\n    });\n    main.addObject(6).then(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 3),\n          object = _ref4[0],\n          mixer = _ref4[1],\n          id = _ref4[2];\n\n      window.mainObject2 = object;\n      main.mixers[id] = mixer;\n      main.animate(id);\n      window.mainObject2.position.z = 20;\n    });\n    main.grid.on('click', function (ev) {\n      console.log(ev);\n      main.startAnimation(4);\n      var dir = new THREE.Vector3();\n      var position = new THREE.Vector3(window.mainObject.position.x, 0, window.mainObject.position.z);\n      var positionWanted = new THREE.Vector3(ev.intersects[0].point.x, 0, ev.intersects[0].point.z);\n      window.positionWanted = positionWanted;\n      dir.subVectors(positionWanted, position).normalize();\n      playerWalkingDirection[0] = dir.x;\n      playerWalkingDirection[2] = dir.z;\n      window.mainObject.lookAt(positionWanted);\n    }); //\n    // $(document).on('click', function(evt) {\n    // \talert(main.getClicked3DPoint(evt));\n    // })\n  });\n});","map":{"version":3,"sources":["/Users/lemonandroid/Banal Dropbox/random/mega-os/ezii-os/app/javascript/packs/eZii-bricklayer-game-3.js"],"names":["EZIIBrickLayerGameMain","THREE","$","main","playerWalkingDirection","findDomDockingPoint","then","init","moveObjectZAxis","cubes","addObject","object","mixer","id","window","mainObject","mixers","animate","position","z","every10MilliSeconds","y","x","positionWanted","undefined","stopAnimation","console","log","stoppedMixers","time","update","mainObject2","grid","on","ev","startAnimation","dir","Vector3","intersects","point","subVectors","normalize","lookAt"],"mappings":"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","sourcesContent":["import EZIIBrickLayerGameMain from './eZii-bricklayer-game/main.js';\nimport * as THREE from 'three';\n\n$(function() {\n\tvar main = new EZIIBrickLayerGameMain();\n\t\n\tvar playerWalkingDirection = [0, 0, 0];\n\tmain.findDomDockingPoint().then(function() {\n\t\tmain.init();\n\t\tmain.moveObjectZAxis(main.cubes[1]);\n\t\n\t\tmain.addObject(4).then(function([object, mixer, id]) {\n\t\t\twindow.mainObject = object;\n\t\t\tmain.mixers[id] = mixer;\n\t\t\n\t\t\tmain.animate(id);\n\t\t\n\t\t\twindow.mainObject.position.z = 20;\n\t\t\t\n\t\t\t\n\t\t\tmain.every10MilliSeconds(function() {\n\t\t\t\twindow.mainObject.position.z += playerWalkingDirection[2] / 5;\n\t\t\t\twindow.mainObject.position.y += playerWalkingDirection[1] / 5;\n\t\t\t\twindow.mainObject.position.x += playerWalkingDirection[0] / 5;\n\t\t\t})\n\t\t\t\n\t\t\tmain.every10MilliSeconds(function() {\n\t\t\t\tif (window.positionWanted === undefined) return;\n\t\t\t\t\n\t\t\t\tif ((window.mainObject.position\t.z < window.positionWanted.z + 0.010) && (window.mainObject.position\t.z > window.positionWanted.z - 0.010) && (window.mainObject.position\t.x < window.positionWanted.x + 0.010) && (window.mainObject.position\t.x > window.positionWanted.x - 0.010)) {\n\t\t\t\t\twindow.positionWanted = undefined;\n\t\t\t\t\tplayerWalkingDirection = [0,0,0]\n\t\t\t\t\t\n\t\t\t\t\tmain.stopAnimation(4);\n\t\t\t\t\tconsole.log(main.stoppedMixers[4].time);\n\t\t\t\t\twhile(main.stoppedMixers[4].time > 0.2) {\n\t\t\t\t\t\tmain.stoppedMixers[4].update(-0.01);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t\t\n\t\t\n\t\tmain.addObject(6).then(function([object, mixer, id]) {\n\t\t\twindow.mainObject2 = object;\n\t\t\t\n\t\t\tmain.mixers[id] = mixer;\n\t\t\n\t\t\tmain.animate(id);\n\t\t\n\t\t\twindow.mainObject2.position.z = 20;\n\t\t});\n\t\t\n\t\t\n\t\tmain.grid.on('click', function(ev) {\n\t\t\tconsole.log(ev);\n\t\t\t\n\t\t\tmain.startAnimation(4);\n\t\t\t\n\t\t\tlet dir = new THREE.Vector3();\n\t\t\t\n\t\t\tlet position = new THREE.Vector3(window.mainObject.position.x, 0, window.mainObject.position.z);\n\t\t\tlet positionWanted = new THREE.Vector3(ev.intersects[0].point.x, 0, ev.intersects[0].point.z);\n\t\t\twindow.positionWanted = positionWanted;\n\t\t\tdir.subVectors( positionWanted, position).normalize();\n\t\t\t\n\t\t\tplayerWalkingDirection[0] = dir.x;\n\t\t\tplayerWalkingDirection[2] = dir.z;\n\t\t\t\n\t\t\twindow.mainObject.lookAt(positionWanted);\n\t\t});\n\t\t\n\t\t\t\n\t\t\n\t\t//\n\t\t// $(document).on('click', function(evt) {\n\t\t// \talert(main.getClicked3DPoint(evt));\n\t\t// })\n\t})\n});\n"]},"metadata":{},"sourceType":"module"}