{"ast":null,"code":"function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar character3dAssetId = 4;\nvar brick3dAssetId = 6;\nvar electricShelf3dAssetId = 7;\nimport EZIIBrickLayerGameMain from './eZii-bricklayer-game/main.js';\nimport * as THREE from 'three';\nimport EZII3DStickMan from './eZii-bricklayer-game/3d-stick-man.js';\nvar eZii3dStickMan;\n$(function () {\n  var piemenu = new wheelnav('piemenu');\n  piemenu.sliceInitPathFunction = piemenu.slicePathFunction;\n  piemenu.initPercent = 0.1;\n  piemenu.wheelRadius = piemenu.wheelRadius * 0.83;\n  piemenu.createWheel();\n  var main = new EZIIBrickLayerGameMain();\n  var playerWalkingDirection = [0, 0, 0];\n  main.findDomDockingPoint().then(function () {\n    main.init();\n    main.moveObjectZAxis(main.cubes[1]);\n    window.threeJsScene = main.scene;\n    eZii3dStickMan = new EZII3DStickMan();\n    main.addObject(character3dAssetId).then(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 3),\n          object = _ref2[0],\n          mixer = _ref2[1],\n          id = _ref2[2];\n\n      window.mainObject = object;\n      main.mixers[id] = mixer;\n      main.animate(id);\n      window.mainObject.position.z = 20;\n      main.every10MilliSeconds(function () {\n        window.mainObject.position.z += playerWalkingDirection[2] / 5;\n        window.mainObject.position.y += playerWalkingDirection[1] / 5;\n        window.mainObject.position.x += playerWalkingDirection[0] / 5;\n      });\n      main.every10MilliSeconds(function () {\n        if (window.positionWanted === undefined) return;\n\n        if (window.mainObject.position.z < window.positionWanted.z + 0.10 && window.mainObject.position.z > window.positionWanted.z - 0.10 && window.mainObject.position.x < window.positionWanted.x + 0.10 && window.mainObject.position.x > window.positionWanted.x - 0.10) {\n          window.positionWanted = undefined;\n          playerWalkingDirection = [0, 0, 0];\n          main.stopAnimation(character3dAssetId);\n\n          while (main.stoppedMixers[character3dAssetId].time > 0.3) {\n            main.stoppedMixers[character3dAssetId].update(-0.1);\n          }\n        }\n      });\n      main.every10MilliSeconds(function () {\n        if (main.stoppedMixers[character3dAssetId] !== undefined && main.stoppedMixers[character3dAssetId].time > 0.2) {\n          main.stoppedMixers[character3dAssetId].update(-0.001);\n        }\n      });\n    });\n    main.addObject(brick3dAssetId).then(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 3),\n          object = _ref4[0],\n          mixer = _ref4[1],\n          id = _ref4[2];\n\n      window.mainObject2 = object;\n      main.mixers[id] = mixer; // main.animate(id);\n\n      window.mainObject2.position.z = 20;\n    });\n    main.addObject(electricShelf3dAssetId).then(function (_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          object = _ref6[0],\n          mixer = _ref6[1],\n          id = _ref6[2];\n\n      window.mainObject3 = object;\n      main.mixers[id] = mixer;\n      main.animate(id);\n      window.mainObject3.position.z = 20;\n      window.mainObject3.position.x = 20;\n    });\n    main.grid.on('click', function (ev) {\n      console.log(ev);\n      main.startAnimation(character3dAssetId);\n      var dir = new THREE.Vector3();\n      var position = new THREE.Vector3(window.mainObject.position.x, 0, window.mainObject.position.z);\n      var positionWanted = new THREE.Vector3(ev.intersects[0].point.x, 0, ev.intersects[0].point.z);\n      window.positionWanted = positionWanted;\n      dir.subVectors(positionWanted, position).normalize();\n      playerWalkingDirection[0] = dir.x;\n      playerWalkingDirection[2] = dir.z;\n      window.mainObject.lookAt(positionWanted);\n    });\n    $(document).on('keydown', function (evt) {\n      console.log(evt.which);\n\n      switch (evt.which) {\n        case 77:\n          main.addObject(brick3dAssetId).then(function (_ref7) {\n            var _ref8 = _slicedToArray(_ref7, 3),\n                object = _ref8[0],\n                mixer = _ref8[1],\n                id = _ref8[2];\n\n            main.mixers[id] = mixer;\n            main.animate(id);\n            object.position.z = window.mainObject.position.z;\n            object.position.x = window.mainObject.position.x;\n          });\n          break;\n\n        case 38:\n          main.tiltCurrentlySelectedObjectUpwards();\n          break;\n\n        case 40:\n          main.tiltCurrentlySelectedObjectDownwards();\n          break;\n\n        default:\n          console.log(evt.which, 'not handled');\n      }\n    });\n\n    window.letStickManAppear = function () {\n      eZii3dStickMan.show(window.mainObject.position); // should be pass by value, not by reference to value (default in ruby and js), ideally this would be a deepCopy or a native javascript passByValue that is not implemented via reference passing (as in an array is passed and argument receiver function can alter the array). IMMPORTANT FOR IT PEOPLE: Don't confuse \"pass by reference\" (refernece to variable holder), \"passy by value via referencee\" (reference to value) and \"pass by value\", ok? We all learn all our life long, just because on doesn't understand something, it doesn't mean the person who designed it is \"imbecile\" (https://medium.com/@manu_78098/im-quite-aware-of-the-concept-of-optimistic-locking-d633fc28ce6c).\n    };\n\n    $(document).on('contextmenu', function (evt) {\n      console.log(evt); // $(\"#contextmenu-eZii-brick-game-3\").remove();\n      // let div = $('<div id=\"contextmenu-eZii-brick-game-3\" style=\"background-color: white;\">TEST</div>');\n      // $(document.body).append(div);\n\n      $('#piemenu').css('position', 'fixed');\n      $('#piemenu').css('top', evt.clientY);\n      $('#piemenu').css('left', evt.clientX);\n    });\n  });\n});","map":{"version":3,"sources":["/Users/lemonandroid/Banal Dropbox/random/mega-os/ezii-os/app/javascript/packs/eZii-bricklayer-game-3.js.erb"],"names":["character3dAssetId","brick3dAssetId","electricShelf3dAssetId","EZIIBrickLayerGameMain","THREE","EZII3DStickMan","eZii3dStickMan","$","piemenu","wheelnav","sliceInitPathFunction","slicePathFunction","initPercent","wheelRadius","createWheel","main","playerWalkingDirection","findDomDockingPoint","then","init","moveObjectZAxis","cubes","window","threeJsScene","scene","addObject","object","mixer","id","mainObject","mixers","animate","position","z","every10MilliSeconds","y","x","positionWanted","undefined","stopAnimation","stoppedMixers","time","update","mainObject2","mainObject3","grid","on","ev","console","log","startAnimation","dir","Vector3","intersects","point","subVectors","normalize","lookAt","document","evt","which","tiltCurrentlySelectedObjectUpwards","tiltCurrentlySelectedObjectDownwards","letStickManAppear","show","css","clientY","clientX"],"mappings":"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","sourcesContent":["const character3dAssetId = 4;\nconst brick3dAssetId = 6;\nconst electricShelf3dAssetId = 7;\n\n\n\n\nimport EZIIBrickLayerGameMain from './eZii-bricklayer-game/main.js';\nimport * as THREE from 'three';\n\n\nimport EZII3DStickMan from './eZii-bricklayer-game/3d-stick-man.js'\n\nvar eZii3dStickMan;\n$(function() {\n\t\n\tvar piemenu = new wheelnav('piemenu');\n\tpiemenu.sliceInitPathFunction = piemenu.slicePathFunction;\n\tpiemenu.initPercent = 0.1;\n\tpiemenu.wheelRadius = piemenu.wheelRadius * 0.83;\n\t\n\tpiemenu.createWheel();\t\n\t\n\t\n\tvar main = new EZIIBrickLayerGameMain();\n\t\n\tvar playerWalkingDirection = [0, 0, 0];\n\tmain.findDomDockingPoint().then(function() {\n\t\tmain.init();\n\t\tmain.moveObjectZAxis(main.cubes[1]);\n\t\t\n\t\t\n\t\twindow.threeJsScene = main.scene;\n\t\t\n\t\t\n\t\teZii3dStickMan = new EZII3DStickMan();\n\t\t\n\t\n\t\tmain.addObject(character3dAssetId).then(function([object, mixer, id]) {\n\t\t\twindow.mainObject = object;\n\t\t\tmain.mixers[id] = mixer;\n\t\t\n\t\t\tmain.animate(id);\n\t\t\n\t\t\twindow.mainObject.position.z = 20;\n\t\t\t\n\t\t\t\n\t\t\tmain.every10MilliSeconds(function() {\n\t\t\t\twindow.mainObject.position.z += playerWalkingDirection[2] / 5;\n\t\t\t\twindow.mainObject.position.y += playerWalkingDirection[1] / 5;\n\t\t\t\twindow.mainObject.position.x += playerWalkingDirection[0] / 5;\n\t\t\t})\n\t\t\t\n\t\t\tmain.every10MilliSeconds(function() {\n\t\t\t\tif (window.positionWanted === undefined) return;\n\t\t\t\t\n\t\t\t\tif ((window.mainObject.position.z < window.positionWanted.z + 0.10) && (window.mainObject.position\t.z > window.positionWanted.z - 0.10) && (window.mainObject.position\t.x < window.positionWanted.x + 0.10) && (window.mainObject.position\t.x > window.positionWanted.x - 0.10)) {\n\t\t\t\t\twindow.positionWanted = undefined;\n\t\t\t\t\tplayerWalkingDirection = [0,0,0]\n\t\t\t\t\t\n\t\t\t\t\tmain.stopAnimation(character3dAssetId);\n\t\t\t\t\t\n\t\t\t\t\twhile(main.stoppedMixers[character3dAssetId].time > 0.3) {\n\t\t\t\t\t\tmain.stoppedMixers[character3dAssetId].update(-0.1);\n\t\t\t\t\t}\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\tmain.every10MilliSeconds(function() {\n\t\t\t\tif(main.stoppedMixers[character3dAssetId] !== undefined && main.stoppedMixers[character3dAssetId].time > 0.2) {\n\t\t\t\t\tmain.stoppedMixers[character3dAssetId].update(-0.001);\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t\t\n\t\t\n\t\tmain.addObject(brick3dAssetId).then(function([object, mixer, id]) {\n\t\t\twindow.mainObject2 = object;\n\t\t\t\n\t\t\tmain.mixers[id] = mixer;\n\t\t\n\t\t\t// main.animate(id);\n\t\t\n\t\t\twindow.mainObject2.position.z = 20;\n\t\t});\n\t\t\n\t\tmain.addObject(electricShelf3dAssetId).then(function([object, mixer, id]) {\n\t\t\twindow.mainObject3 = object;\n\t\t\t\n\t\t\tmain.mixers[id] = mixer;\n\t\t\n\t\t\tmain.animate(id);\n\t\t\n\t\t\twindow.mainObject3.position.z = 20;\n\t\t\twindow.mainObject3.position.x = 20;\t\n\t\t});\n\t\t\n\t\t\n\t\tmain.grid.on('click', function(ev) {\n\t\t\tconsole.log(ev);\n\t\t\t\n\t\t\tmain.startAnimation(character3dAssetId);\n\t\t\t\n\t\t\tlet dir = new THREE.Vector3();\n\t\t\t\n\t\t\tlet position = new THREE.Vector3(window.mainObject.position.x, 0, window.mainObject.position.z);\n\t\t\tlet positionWanted = new THREE.Vector3(ev.intersects[0].point.x, 0, ev.intersects[0].point.z);\n\t\t\twindow.positionWanted = positionWanted;\n\t\t\tdir.subVectors( positionWanted, position).normalize();\n\t\t\t\n\t\t\tplayerWalkingDirection[0] = dir.x;\n\t\t\tplayerWalkingDirection[2] = dir.z;\n\t\t\t\n\t\t\twindow.mainObject.lookAt(positionWanted);\n\t\t});\n\t\t\n\t\t\t\n\t\t\n\t\t\n\t\t$(document).on('keydown', function(evt) {\n\t\t\tconsole.log(evt.which);\n\t\t\t\n\t\t\tswitch(evt.which) {\n\t\t\t  case 77:\n  \t\t\t\tmain.addObject(brick3dAssetId).then(function([object, mixer, id]) {\n  \t\t\t\t\tmain.mixers[id] = mixer;\n\t\t\n  \t\t\t\t\tmain.animate(id);\n\t\t\t\t\t\n  \t\t\t\t\tobject.position.z = window.mainObject.position.z;\n  \t\t\t\t\tobject.position.x = window.mainObject.position.x;\n  \t\t\t\t});\n\t\t\t   break;\n\t\t\t  case 38:\n\t\t\t\t  main.tiltCurrentlySelectedObjectUpwards();\n\t\t\t    break;\n\t\t\t  case 40:\n\t\t\t\t  main.tiltCurrentlySelectedObjectDownwards();\n\t\t\t    break;\n\t\t\t  default:\n\t\t\t\tconsole.log(evt.which, 'not handled');\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\twindow.letStickManAppear = function() {\n\t\t\teZii3dStickMan.show(window.mainObject.position) // should be pass by value, not by reference to value (default in ruby and js), ideally this would be a deepCopy or a native javascript passByValue that is not implemented via reference passing (as in an array is passed and argument receiver function can alter the array). IMMPORTANT FOR IT PEOPLE: Don't confuse \"pass by reference\" (refernece to variable holder), \"passy by value via referencee\" (reference to value) and \"pass by value\", ok? We all learn all our life long, just because on doesn't understand something, it doesn't mean the person who designed it is \"imbecile\" (https://medium.com/@manu_78098/im-quite-aware-of-the-concept-of-optimistic-locking-d633fc28ce6c).\n\t\t}\n\t\t\n\t\t\n\t\t$(document).on('contextmenu', function(evt) {\n\t\t\t\n\t\t\tconsole.log(evt);\n\t\t\t\n\t\t\t// $(\"#contextmenu-eZii-brick-game-3\").remove();\n\t\t\t\n\t\t\t// let div = $('<div id=\"contextmenu-eZii-brick-game-3\" style=\"background-color: white;\">TEST</div>');\n\t\t\t\n\t\t\t\n\t\t\t// $(document.body).append(div);\n\t\t\t$('#piemenu').css('position', 'fixed');\n\t\t\t\n\t\t\t$('#piemenu').css('top', evt.clientY);\n\t\t\t$('#piemenu').css('left', evt.clientX);\n\t\t\t\n\t\t});\n\t})\n});\n"]},"metadata":{},"sourceType":"module"}